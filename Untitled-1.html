<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>第一个three.js文件_WebGL三维场景</title>
  <style>
    body {
      margin: 10;
      overflow: hidden;
      /* 隐藏body窗口区域滚动条 */
    }
    * {
    touch-action: pan-y;
}
  </style>
  <!--引入three.js三维引擎-->
  <script src="three.js"></script>
  <!-- <script src="./three.js"></script> -->
  <!-- <script src="http://www.yanhuangxueyuan.com/threejs/build/three.js"></script> -->
  <script src="OrbitControls.js"></script>
  <!-- 引入obj模型加载库OBJLoader.js -->
  <script src="OBJLoader.js"></script>
  <!-- 引入obj模型材质加载库MTLLoader.js -->
  <script src="MTLLoader.js"></script>
  <script src="3Dmodel_spin.js"></script>
  
</head>
<body style=" background-color: rgb(161, 249, 255)">
  <div style=" background-color: rgb(161, 249, 255); text-align: center;">
    <button value="button" onclick="myfunction1()" >旋转九十度</button>
    <button value="button" onclick="myfunction2()" >恢复初始</button>
    <button value="button" onclick="myfunction4()" >自动旋转</button>
    <button value="button" onclick="myfunction5()" >切换模型</button>
    <button value="button" onclick="myfunction6()" >移动X轴坐标10个单位</button>
    <button value="button" onclick="myfunction7()" >移动y轴坐标10个单位</button>
    <button value="button" onclick="myfunction8()" >移动z轴坐标10个单位</button>
    <button value="button" onclick="myfunction9()" >阴影投射</button>
    <button value="button" onclick="myfunction100()" >切换模型中零件的颜色</button>
    <button value="button" onclick="myfunction102()" >自动变换零件的颜色</button>
    <button value="button" onclick="myfunction10()" >线框显示</button>
    <input type="file" name="file" id="filePicker" accept=".obj"/>
      <input type="button" value = "生成"  onclick="show()"/>
    <form action="临时模型创建.php" method="post">
      <input name='Temporary_model' value="1234567"/>
      <input type="submit" value = "创建" />
    </form>

  </div>
  <script >
    /**
     * 创建场景对象Scene
     */
    var scene = new THREE.Scene();
    /**
    * 加载OBJ文件，只加载obj文件中的几何信息，不加载材质文件.mtl
    */
    var group;
    var model_x=1;
    var mesh_x=0;
    var mesh_y=0;
    var mesh_z=0;
    var a1=1;
    var b1=0;
    var c1=0;
    var x1=0;
    var x1_button=0;
    var loader = new THREE.OBJLoader();
    var mtlloader = new THREE.MTLLoader();
    var shadow_button=0;
    var Wireframe_button=0;
    modelSelect(model_x)

    var Y_1=0; //旋转角度
    var button_off=0;//前置判断旋转开关的条件
    var button_off_1=1; //控制旋转的开关
    var coordinates_1
    var worldPosition = new THREE.Vector3();

    // 托盘网格模型
    var geometry1 = new THREE.CylinderGeometry(150,150,10,100);
    var material1 = new THREE.MeshLambertMaterial({
      color: 0xeeebff,//颜色
      opacity:1,//透明度
      transparent:true,//是否开启透明度
      specular:0x000000,
      shininess:10,
      wireframe:false,//线框模式
    }); //材质对象Material
    var mesh1 = new THREE.Mesh(geometry1, material1); //网格模型对象Mesh
    mesh1.position.set(0,-10,0)//立方体位置坐标
    mesh1.castShadow=false;//开启阴影
    mesh1.receiveShadow=false;//接收阴影
    scene.add(mesh1); //网格模型添加到场景中


    /**
     * 光源设置
     */
    //光源
    var point = new THREE.PointLight(0xffffff);
    point.position.set(120, 150, 150); //点光源位置
    //point.target = mesh1;//平行光线照射到物件上
    point.castShadow=false;//开启灯光投射阴影
    point.shadowMapWidth = 4096;//阴影贴图宽
    point.shadowMapHeight = 4096;//阴影贴图高
    point.shadowDarkness =1;
    scene.add(point); //点光源添加到场景中
    //环境光
    //var ambient = new THREE.AmbientLight(0x111111);
    //scene.add(ambient);
    //console.log(scene)
    //console.log(scene.children)
    /**
     * 相机设置
     */
    var width = window.innerWidth; //窗口宽度
    var height = window.innerHeight; //窗口高度
    var k = width / height; //窗口宽高比
    var s = 200; //三维场景显示范围控制系数，系数越大，显示的范围越大
    //创建相机对象
    var camera = new THREE.OrthographicCamera(-s * k, s * k, s, -s, 1, 1000);
    camera.position.set(100, 100, 200); //设置相机位置
    camera.lookAt(scene.position); //设置相机方向(指向的场景对象)
    //添加鼠标控制camera视角控制
		var orbitControls = new THREE.OrbitControls(camera);
        orbitControls.autoRotate = true;//设置平面自动旋转

    /**
     * 创建渲染器对象
     */
    var renderer = new THREE.WebGLRenderer(
      {
        antialias:true,//抗锯齿
        alpha:true
      }
    );
    renderer.setSize(width, height);//设置渲染区域尺寸
    renderer.setClearColor(0xa1f9ff, 1); //设置背景颜色
    renderer.shadowMap.enabled = false;//开启阴影，加上阴影渲染
    document.body.appendChild(renderer.domElement); //body元素中插入canvas对象
    //执行渲染操作   指定场景、相机作为参数

    
    var T0 = new Date();//上次时间
    render();
    


//var controls = new THREE.OrbitControls(camera);//创建控件对象
// 已经通过requestAnimationFrame(render);周期性执行render函数，没必要再通过监听鼠标事件执行render函数
// controls.addEventListener('change', render)

  </script>
</body>
</html>